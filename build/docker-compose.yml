services:
  qcc74x-sdk:
    build:
      context: .
      dockerfile: Dockerfile.qcc74x
    image: cubicattache/qcc74x-toolchain:latest
    volumes:
      - .:/workspace:rw
      - ./build:/workspace/build:rw
      - ~/qcc74x-cache:/cache:rw
    working_dir: /workspace
    environment:
      - CHIP=qcc743
      - BOARD=qcc743dk
    stdin_open: true
    tty: true
    platform: linux/amd64

  shell:
    extends:
      service: qcc74x-toolchain
    profiles: ["shell"]
    command: ["/bin/bash"]
